(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{3190:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),n=s(2115),i=s(5695),r=s(6874),c=s.n(r),l=s(5731);function d(){let e=(0,i.useRouter)(),t=(0,i.useParams)().id,[s,r]=(0,n.useState)(null),[d,o]=(0,n.useState)(null),[x,h]=(0,n.useState)([]),[m,p]=(0,n.useState)(!0),[y,g]=(0,n.useState)(null);if((0,n.useEffect)(()=>{if(!localStorage.getItem("token"))return void e.push("/login");(async()=>{try{let[e,s]=await Promise.all([l.F.getInvoice(t),l.F.getCurrentUser()]);r(e),g(s);let a=await l.F.getPickupRequest(e.pickup_request_id);o(a);let n=(await l.F.getLaundryTypes()).filter(e=>a.service_type_ids.includes(e.id));h(n),p(!1)}catch(e){console.error("Error fetching invoice data:",e),p(!1)}})()},[t,e]),m)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!s||!d||!y)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Invoice Not Found"}),(0,a.jsx)(c(),{href:"/dashboard",className:"text-blue-600 hover:text-blue-800",children:"Return to Dashboard"})]})});let u=s.amount/1.08,j=.08*u,b=s.amount;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n  @media print {\n    body { \n      margin: 0;\n      padding: 0;\n      font-size: 12px;\n    }\n    \n    .print\\:hidden {\n      display: none !important;\n    }\n    \n    .invoice-table {\n      width: 100% !important;\n      table-layout: fixed !important;\n      border-collapse: collapse !important;\n    }\n    \n    .invoice-table th,\n    .invoice-table td {\n      border: 1px solid #e5e7eb !important;\n      padding: 8px !important;\n      word-wrap: break-word !important;\n      overflow: hidden !important;\n    }\n    \n    .invoice-table th:nth-child(1),\n    .invoice-table td:nth-child(1) {\n      width: 25% !important;\n    }\n    \n    .invoice-table th:nth-child(2),\n    .invoice-table td:nth-child(2) {\n      width: 25% !important;\n    }\n    \n    .invoice-table th:nth-child(3),\n    .invoice-table td:nth-child(3) {\n      width: 15% !important;\n      text-align: center !important;\n    }\n    \n    .invoice-table th:nth-child(4),\n    .invoice-table td:nth-child(4) {\n      width: 17.5% !important;\n      text-align: right !important;\n    }\n    \n    .invoice-table th:nth-child(5),\n    .invoice-table td:nth-child(5) {\n      width: 17.5% !important;\n      text-align: right !important;\n    }\n    \n    .price-cell {\n      font-weight: bold !important;\n      color: #000 !important;\n    }\n    \n    .overflow-x-auto {\n      overflow: visible !important;\n    }\n    \n    .min-w-full {\n      width: 100% !important;\n    }\n    \n    .totals-section {\n      width: 100% !important;\n      margin-top: 20px !important;\n    }\n    \n    .totals-table {\n      width: 100% !important;\n      max-width: 300px !important;\n      margin-left: auto !important;\n      border-collapse: collapse !important;\n    }\n    \n    .totals-table td {\n      border: 1px solid #e5e7eb !important;\n      padding: 8px !important;\n      font-size: 14px !important;\n    }\n    \n    .total-row {\n      font-weight: bold !important;\n      background-color: #f9fafb !important;\n    }\n  }\n"}}),(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,a.jsx)(c(),{href:"/dashboard",className:"text-2xl font-bold text-blue-600",children:"Laundry Service"}),(0,a.jsxs)("nav",{className:"flex space-x-8",children:[(0,a.jsx)(c(),{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:"Dashboard"}),(0,a.jsx)(c(),{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:"Schedule Pickup"}),(0,a.jsx)(c(),{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:"My Orders"}),(0,a.jsx)(c(),{href:"/dashboard",className:"text-gray-600 hover:text-gray-900",children:"Invoices"}),(0,a.jsxs)("span",{className:"text-gray-600",children:["Hello, ",y.full_name]}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("token"),e.push("/login")},className:"text-gray-600 hover:text-gray-900",children:"Logout"})]})]})})}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"INVOICE"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["#",s.id]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-blue-600 mb-2",children:"Laundry Service"}),(0,a.jsx)("p",{className:"text-gray-600",children:"123 Laundry Street"}),(0,a.jsx)("p",{className:"text-gray-600",children:"New York, NY 10001"}),(0,a.jsx)("p",{className:"text-gray-600",children:"contact@laundryservice.com"}),(0,a.jsx)("p",{className:"text-gray-600",children:"(555) 123-4567"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bill To:"}),(0,a.jsxs)("div",{className:"text-gray-600",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:y.full_name}),(0,a.jsx)("p",{children:d.address.street}),(0,a.jsxs)("p",{children:[d.address.city,", ",d.address.state," ",d.address.zip_code]}),(0,a.jsxs)("p",{children:["Email: ",y.email]}),(0,a.jsxs)("p",{children:["Phone: ",y.phone_number]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Invoice Details:"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Invoice Date:"}),(0,a.jsx)("span",{className:"text-gray-900",children:new Date(s.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Payment Method:"}),(0,a.jsx)("span",{className:"text-gray-900",children:"Cash on Delivery"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Payment Status:"}),(0,a.jsx)("span",{className:"".concat("paid"===s.status?"text-green-600":"text-orange-600"),children:"paid"===s.status?"Paid":"Pending (Pay on Delivery)"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pickup Date:"}),(0,a.jsx)("span",{className:"text-gray-900",children:new Date(d.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Pickup Time:"}),(0,a.jsx)("span",{className:"text-gray-900",children:d.time_slot_id.includes("afternoon")?"Afternoon (1:00 PM - 5:00 PM)":"Morning (9:00 AM - 12:00 PM)"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Estimated Delivery:"}),(0,a.jsx)("span",{className:"text-green-600",children:new Date(s.estimated_delivery).toLocaleDateString()})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Service Details:"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 invoice-table",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.itemized_breakdown&&s.itemized_breakdown.length>0?s.itemized_breakdown.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.item_name}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.service_type}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 text-center",children:e.quantity}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right price-cell",children:["₹",e.unit_price.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right price-cell",children:["₹",e.total_price.toFixed(2)]})]},t)):(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Laundry Service"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:"Professional laundry service"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 text-center",children:"1"}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right price-cell",children:["₹",u.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right price-cell",children:["₹",u.toFixed(2)]})]})})]})})]}),(0,a.jsx)("div",{className:"flex justify-end mb-8 totals-section",children:(0,a.jsx)("div",{className:"w-64",children:(0,a.jsx)("table",{className:"totals-table",children:(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"text-gray-600",children:"Subtotal:"}),(0,a.jsxs)("td",{className:"text-gray-900 text-right price-cell",children:["₹",u.toFixed(2)]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"text-gray-600",children:"Tax (8%):"}),(0,a.jsxs)("td",{className:"text-gray-900 text-right price-cell",children:["₹",j.toFixed(2)]})]}),(0,a.jsxs)("tr",{className:"total-row",children:[(0,a.jsx)("td",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),(0,a.jsxs)("td",{className:"text-lg font-semibold text-blue-600 text-right price-cell",children:["₹",b.toFixed(2)]})]})]})})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 pt-8 border-t",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Notes:"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Thank you for choosing our laundry service. We appreciate your business!"}),d.special_instructions&&(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:[(0,a.jsx)("strong",{children:"Special Instructions:"})," ",d.special_instructions]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Terms & Conditions:"}),(0,a.jsxs)("ul",{className:"text-gray-600 text-sm space-y-1",children:[(0,a.jsx)("li",{children:"• Payment is due upon pickup of laundry."}),(0,a.jsx)("li",{children:"• Estimated delivery time may vary based on workload."}),(0,a.jsx)("li",{children:"• Please check your items before leaving."}),(0,a.jsx)("li",{children:"• We are not responsible for items left unclaimed for more than 30 days."})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-4 mt-8 pt-8 border-t print:hidden",children:[(0,a.jsx)("button",{onClick:()=>{window.print()},className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700",children:"Print Invoice"}),(0,a.jsx)("button",{onClick:()=>{window.print()},className:"bg-green-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-green-700",children:"Download PDF"}),(0,a.jsx)(c(),{href:"/dashboard",className:"bg-gray-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-gray-700",children:"Back to Dashboard"})]})]})})})]})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},5731:(e,t,s)=>{"use strict";s.d(t,{F:()=>r});let a="http://localhost:8000";!a||a.startsWith("http://")||a.startsWith("https://")||(a="https://".concat(a)),console.log("API_URL:",a),console.log("NEXT_PUBLIC_API_URL:","http://localhost:8000");let n=()=>{let e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{}},i=async e=>{if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.detail||t.message||"An error occurred")}return e.json()},r={register:async e=>i(await fetch("".concat(a,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})),login:async e=>i(await fetch("".concat(a,"/token"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({username:e.email,password:e.password})})),getCurrentUser:async()=>i(await fetch("".concat(a,"/users/me"),{headers:n()})),getLaundryTypes:async()=>i(await fetch("".concat(a,"/laundry-types"),{headers:n()})),async getTimeSlots(e){let t=e?"".concat(a,"/time-slots?date=").concat(encodeURIComponent(e)):"".concat(a,"/time-slots");return i(await fetch(t,{headers:n()}))},createPickupRequest:async e=>i(await fetch("".concat(a,"/pickup-requests"),{method:"POST",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify(e)})),getPickupRequests:async()=>i(await fetch("".concat(a,"/pickup-requests"),{headers:n()})),getPickupRequest:async e=>i(await fetch("".concat(a,"/pickup-requests/").concat(e),{headers:n()})),getPaymentMethods:async()=>i(await fetch("".concat(a,"/payment-methods"),{headers:n()})),createPayment:async e=>i(await fetch("".concat(a,"/payments"),{method:"POST",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify(e)})),getPayment:async e=>i(await fetch("".concat(a,"/payments/").concat(e),{headers:n()})),getInvoices:async()=>i(await fetch("".concat(a,"/invoices"),{headers:n()})),getInvoiceByPaymentId:async e=>i(await fetch("".concat(a,"/invoices/payment/").concat(e),{headers:n()})),getInvoice:async e=>i(await fetch("".concat(a,"/invoices/").concat(e),{headers:n()}))}},6607:(e,t,s)=>{Promise.resolve().then(s.bind(s,3190))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(6607)),_N_E=e.O()}]);